---
title: "[React Docs ver.2] Updating Arrays in State - ë°°ì—´ state ì—…ë°ì´íŠ¸"
date: "2023-08-28"
template: "post"
draft: false
slug: "/posts/react-doc-v2-19"
category: "React"
tags:
  - "React"
description: "ë¦¬ì•¡íŠ¸ ìƒˆë¡œìš´ ê³µì‹ë¬¸ì„œë¥¼ ì½ê³  ì •ë¦¬í•œ ê¸€"
# socialImage: "./media/42-line-bible.jpg"
---

> ğŸ³ ë³¸ ê²Œì‹œê¸€ì€ ë¦¬ì•¡íŠ¸ì˜ ìƒˆë¡œìš´Â [ê³µì‹ë¬¸ì„œ](https://react.dev/learn)ë¥¼ ì½ê³  ì •ë¦¬í•œ ê¸€ì´ë‹¤.

ğŸ¦¦ **ëª©ì°¨**
- [Overview](#overview)
- [ë³€ì´ ì—†ì´ ë°°ì—´ ì—…ë°ì´íŠ¸ í•˜ê¸°](#ë³€ì´-ì—†ì´-ë°°ì—´-ì—…ë°ì´íŠ¸-í•˜ê¸°)
  - [ë°°ì—´ì— ì¶”ê°€í•˜ê¸°](#ë°°ì—´ì—-ì¶”ê°€í•˜ê¸°)
  - [ë°°ì—´ì—ì„œ ì‚­ì œí•˜ê¸°](#ë°°ì—´ì—ì„œ-ì‚­ì œí•˜ê¸°)
  - [ë°°ì—´ ë³€ê²½í•˜ê¸°](#ë°°ì—´-ë³€ê²½í•˜ê¸°)
  - [ë°°ì—´ì—ì„œ í•­ëª© êµì²´í•˜ê¸°](#ë°°ì—´ì—ì„œ-í•­ëª©-êµì²´í•˜ê¸°)

## Overview

ë°°ì—´ì€ JavaScriptì—ì„œ ë³€ê²½ ê°€ëŠ¥í•˜ì§€ë§Œ stateì— ì €ì¥í•  ë•Œ ë°˜ë“œì‹œ ë³€ê²½ ë¶ˆê°€ëŠ¥ì´ê²Œ ëŒ€í•´ì•¼ í•œë‹¤. ì´ì „ì˜ ê°ì²´ì²˜ëŸ¼ stateì— ì €ì¥ëœ ë°°ì—´ì„ ì—…ë°ì´íŠ¸ í•˜ê³  ì‹¶ìœ¼ë©´ ìƒˆë¡œìš´ ë°°ì—´ì„(ë˜ëŠ” ê¸°ì¡´ ë°°ì—´ì˜ ë³µì‚¬ë³¸ì„ ë§Œë“¦)ì°½ì¡°í•œ ë‹¤ìŒ ìƒˆë¡œìš´ ë°°ì—´ì„ ì‚¬ìš©í•˜ë„ë¡ stateë¥¼ ì„¤ì •í•´ì•¼í•œë‹¤.

## ë³€ì´ ì—†ì´ ë°°ì—´ ì—…ë°ì´íŠ¸ í•˜ê¸°

JavaScriptì—ì„œ ë°°ì—´ì€ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ê°ì²´ì´ë‹¤. [ê°ì²´ ì²˜ëŸ¼](https://react.dev/learn/updating-objects-in-state), **ë°°ì—´ì€ ë°˜ë“œì‹œ React stateì—ì„œ ì½ê¸° ì „ìš©ìœ¼ë¡œ ì·¨ê¸‰ë˜ì–´ì•¼ í•œë‹¤.** `arr[0] = 'bird`ì²˜ëŸ¼ ë°°ì—´ ë‚´ë¶€ì˜ í•­ëª©ì„ ì¬í• ë‹¹í•˜ë©´ ì•ˆëœë‹¤. ê·¸ë¦¬ê³  `push()`ë‚˜ `pop()`ê°™ì€ ë°°ì—´ì„ ë³€ì´ ì‹œí‚¤ëŠ” ë©”ì†Œë“œë“¤ë„ ì‚¬ìš©í•´ì„  ì•ˆëœë‹¤.

ëŒ€ì‹ , ë°°ì—´ì„ ì—…ë°ì´íŠ¸ í•˜ê³  ì‹¶ì„ ë•Œ, state ì„¤ì • í•¨ìˆ˜ì— ìƒˆ ë°°ì—´ì„ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê²Œ í•˜ë ¤ë©´ stateì˜ ì›ë˜ ë°°ì—´ì—ì„œ `filter()` ë˜ëŠ” `map()`ê³¼ ê°™ì€ ë¹„ë³€ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ìƒˆ ë°°ì—´ì„ ë§Œë“¤ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ìƒˆ ë°°ì—´ì„ stateë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

ë‹¤ìŒì€ ì¼ë°˜ì ì¸ ë°°ì—´ ì—°ì‚°ì— ëŒ€í•œ ì°¸ì¡° í‘œì´ë‹¤. React state ë‚´ì—ì„œ ë°°ì—´ì„ ë‹¤ë£° ë•ŒëŠ” ì™¼ìª½ ì—´ì˜ ë©”ì„œë“œë¥¼ í”¼í•˜ê³  ëŒ€ì‹  ì˜¤ë¥¸ìª½ ì—´ì˜ ë©”ì„œë“œë¥¼ ì„ í˜¸í•´ì•¼ í•œë‹¤:
![image](https://github.com/tamoimi/new-blog/assets/100749520/26486fc9-a6d5-43fe-a62b-8fb4e16ff5d1)
ë˜ëŠ” ë‘ ì—´ì˜ ë©”ì„œë“œë¥¼ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” [Immerë¥¼ ì‚¬ìš©](https://react.dev/learn/updating-arrays-in-state#write-concise-update-logic-with-immer)í•  ìˆ˜ë„ ìˆë‹¤.

> ğŸš¨ í•¨ì •

[slice](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)ì™€ [splice](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)ëŠ” ì´ë¦„ì´ ë¹„ìŠ·í•˜ì§€ë§Œ ë§¤ìš° ë‹¤ë¥´ë‹¤:

- `slice`ëŠ” ë°°ì—´ ë˜ëŠ” ì¼ë¶€ë¥¼ ë³µì‚¬í•  ìˆ˜ ìˆë‹¤.
- `splice`ëŠ” ë°°ì—´ì˜ í•­ëª©ì„ ì‚½ì… í˜¹ì€ ì‚­ì œí•˜ê¸° ìœ„í•´ **ë³€ì´í•œë‹¤.**

Reactì—ì„œ ê°ì²´ë‚˜ ë°°ì—´ì˜ stateë¥¼ ë°”ê¾¸ê³  ì‹¶ì§€ ì•Šê¸° ë•Œë¬¸ì— `slice`ë¥¼ ë” ë§ì´ ì‚¬ìš©í•  ê²ƒì´ë‹¤. [ê°ì²´ state ì—…ë°ì´íŠ¸](https://react.dev/learn/updating-objects-in-state)ì—ì„œ ë³€ì´ê°€ ë¬´ì—‡ì´ê³  ì™œ stateì— ê¶Œì¥ë˜ì§€ ì•ŠëŠ”ì§€ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤.

### ë°°ì—´ì— ì¶”ê°€í•˜ê¸°

`push()`ëŠ” ë°°ì—´ì„ ë³€ì´í•œë‹¤(ìš°ë¦¬ëŠ” ê·¸ê±¸ ì›í•˜ì§€ ì•ŠìŒ!):

```jsx
import { useState } from 'react';

let nextId = 0;

export default function List() {
  const [name, setName] = useState('');
  const [artists, setArtists] = useState([]);

  return (
    <>
      <h1>Inspiring sculptors:</h1>
      <input
        value={name}
        onChange={e => setName(e.target.value)}
      />
      <button onClick={() => {
        artists.push({
          id: nextId++, // --- ìˆ˜ì •ì „ âŒ
          name: name,
        });
//------------------------------------------------------//
        setArtists(
        ...artists,
        { id: nextId++, name: name } // --- ìˆ˜ì •í›„ â­•
        ]);
      }}>Add</button>
      <ul>
        {artists.map(artist => (
          <li key={artist.id}>{artist.name}</li>
        ))}
      </ul>
    </>
  );
}
```

ëŒ€ì‹  ê¸°ì¡´ í•­ëª©ê³¼ ëì— ìƒˆ í•­ëª©ì„ í¬í•¨í•˜ëŠ” ìƒˆ ë°°ì—´ì„ ë§Œë“¤ì. ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆì§€ë§Œ ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ `...` [ë°°ì—´ ì „ê°œ êµ¬ë¬¸](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Spread_syntax)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤:

```jsx
setArtists(
    ...artists, // ì´ì „ í•­ëª©ì„ í¬í•¨í•œë‹¤.
    { id: nextId++, name: name } // ìƒˆë¡œìš´ í•­ëª©ì„ ëì— ë°°ì¹˜í•œë‹¤.
  ]
);
```

ë°°ì—´ ì „ê°œ êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ë©´ í•­ëª©ì„ ì›ë³¸ ë°°ì—´ `...artists` ì•ì— ë°°ì¹˜í•˜ì—¬ í•­ëª©ì„ ì¶”ê°€í•  ìˆ˜ë„ ìˆë‹¤:

```jsx
setArtists([
  { id: nextId++, name: name },
  ...artists, // ì´ì „ í•­ëª©ì„ ëì— ë°°ì¹˜í•œë‹¤.
]);
```

ì´ëŸ° ì‹ìœ¼ë¡œ ì „ê°œ êµ¬ë¬¸ì€ ë°°ì—´ì˜ ëì— ì¶”ê°€í•˜ëŠ” `push()`ì™€ ë°°ì—´ì˜ ì‹œì‘ ë¶€ë¶„ì— ì¶”ê°€í•˜ëŠ” `unshift()`ì˜ ê¸°ëŠ¥ì„ ëª¨ë‘ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

### ë°°ì—´ì—ì„œ ì‚­ì œí•˜ê¸°

ë°°ì—´ì—ì„œ í•­ëª©ì„ ì‚­ì œí•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ í•„í„°ë¥¼ ì ìš©í•˜ëŠ” ê²ƒì´ë‹¤. í•´ë‹¹ í•­ëª©ì„ í¬í•¨í•˜ì§€ ì•Šì€ ìƒˆë¡œìš´ ë°°ì—´ì„ ìƒì„±í•œë‹¤. ì´ê²ƒì„ í•˜ê¸° ìœ„í•´ `filter` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤:

```jsx
import { useState } from "react";

let initialArtists = [
  { id: 0, name: "Marta Colvin Andrade" },
  { id: 1, name: "Lamidi Olonade Fakeye" },
  { id: 2, name: "Louise Nevelson" },
];

export default function List() {
  const [artists, setArtists] = useState(initialArtists);

  return (
    <>
      <h1>Inspiring sculptors:</h1>
      <ul>
        {artists.map((artist) => (
          <li key={artist.id}>
            {artist.name}{" "}
            <button
              onClick={() => {
                setArtists(
                  artists.filter(
                    (
                      a, // --- filter ë©”ì†Œë“œ ì ìš©
                    ) => a.id !== artist.id,
                  ),
                );
              }}
            >
              Delete
            </button>
          </li>
        ))}
      </ul>
    </>
  );
}
```

![2023-08-28 11 07 58](https://github.com/tamoimi/new-blog/assets/100749520/ce39b68a-b221-4089-90ed-51e406e3a786)

```jsx
setArtists(artists.filter((a) => a.id !== artist.id));
```

ì—¬ê¸°ì„œ `artists.filter(a => a.id !== artist.id)`êµ¬ë¬¸ì€ `artist.id`ì™€ ë‹¤ë¥¸ IDë¥¼ ê°€ì§„ `artists`ë¡œ êµ¬ì„±ëœ ë°°ì—´ì„ ìƒì„±í•œë‹¤â€ëŠ” ì˜ë¯¸ì´ë‹¤. ì¦‰, ê° artistì˜ â€˜ì‚­ì œâ€™ ë²„íŠ¼ì€ ë°°ì—´ì—ì„œ í•´ë‹¹ ì•„í‹°ìŠ¤íŠ¸ë¥¼ **í•„í„°ë§**í•œ ë‹¤ìŒ ê²°ê³¼ ë°°ì—´ë¡œ ë‹¤ì‹œ ë Œë”ë§í•˜ë„ë¡ ìš”ì²­í•œë‹¤. `filter`ëŠ” ì›ë˜ ë°°ì—´ì„ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì!

### ë°°ì—´ ë³€ê²½í•˜ê¸°

ë§Œì•½ ë°°ì—´ì˜ ì „ì²´ í•­ëª©ì´ë‚˜ ì¼ë¶€ë¥¼ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´, `map()`ì„ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ë°°ì—´ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤. `map`ì— ì „ë‹¬í•  í•¨ìˆ˜ëŠ” ë°ì´í„° ë˜ëŠ” ì¸ë±ìŠ¤(ë˜ëŠ” ë‘˜ ë‹¤)ì— ë”°ë¼ ê° í•­ëª©ì— ëŒ€í•´ ìˆ˜í–‰í•  ì‘ì—…ì„ ê²°ì •í•  ìˆ˜ ìˆë‹¤.

ì´ ì˜ˆì œì—ì„œ ë°°ì—´ì€ ë‘ ê°œì˜ ì›ê³¼ í•˜ë‚˜ì˜ ì •ì‚¬ê°í˜• ì¢Œí‘œë¥¼ í¬í•¨í•œë‹¤. ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì›ë§Œ 50í”½ì…€ ì•„ë˜ë¡œ ì´ë™í•œë‹¤. ì´ê²ƒì€ `map()`ì„ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ë°ì´í„° ë°°ì—´ì„ ìƒì„±í•˜ì—¬ ìˆ˜í–‰ëœë‹¤:

```jsx
import { useState } from "react";

let initialShapes = [
  { id: 0, type: "circle", x: 50, y: 100 },
  { id: 1, type: "square", x: 150, y: 100 },
  { id: 2, type: "circle", x: 250, y: 100 },
];

export default function ShapeEditor() {
  const [shapes, setShapes] = useState(initialShapes);

  function handleClick() {
    const nextShapes = shapes.map((shape) => {
      if (shape.type === "square") {
        // ë³€ê²½ ì—†ìŒ
        return shape;
      } else {
        // 50px ì•„ë˜ë¡œ ìƒˆ ì›ì„ ë°˜í™˜
        return {
          ...shape,
          y: shape.y + 50,
        };
      }
    });
    // ìƒˆë¡œìš´ ë°°ì—´ê³¼ í•¨ê»˜ ë¦¬ ë Œë”ë§
    setShapes(nextShapes);
  }

  return (
    <>
      <button onClick={handleClick}>Move circles down!</button>
      {shapes.map((shape) => (
        <div
          key={shape.id}
          style={{
            background: "purple",
            position: "absolute",
            left: shape.x,
            top: shape.y,
            borderRadius: shape.type === "circle" ? "50%" : "",
            width: 20,
            height: 20,
          }}
        />
      ))}
    </>
  );
}
```

![2023-08-28 11 19 26](https://github.com/tamoimi/new-blog/assets/100749520/6a5881c7-3f91-49d1-9cbd-174d92db5fe3)

### ë°°ì—´ì—ì„œ í•­ëª© êµì²´í•˜ê¸°

ë°°ì—´ì—ì„œ í•˜ë‚˜ ì´ìƒì˜ í•­ëª©ì„ ë°”ê¾¸ê³  ì‹¶ì€ ê²½ìš°ê°€ ìˆë‹¤. `ar[0] = 'bird'`ì™€ ê°™ì€ í• ë‹¹ì€ ì›ë˜ ë°°ì—´ì„ ë³€ì´í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ì´ ê²½ìš°ì—ë„ `map`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

í•­ëª©ì„ ë°”ê¾¸ë ¤ë©´ `map`ìœ¼ë¡œ ìƒˆ ë°°ì—´ì„ ë§Œë“¤ê³  `map` í˜¸ì¶œ ì•ˆì—ì„œ ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ í•­ëª©ì˜ ì¸ë±ìŠ¤ë¥¼ ë°›ê²Œ ëœë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›ë˜ í•­ëª©(ì²« ë²ˆì§¸ ì¸ìˆ˜)ì„ ë°˜í™˜í• ì§€ ì•„ë‹ˆë©´ ë‹¤ë¥¸ ê²ƒì„ ë°˜í™˜í• ì§€ ê²°ì •í•  ìˆ˜ ìˆë‹¤:

```jsx
import { useState } from "react";

let initialCounters = [0, 0, 0];

export default function CounterList() {
  const [counters, setCounters] = useState(initialCounters);

  function handleIncrementClick(index) {
    const nextCounters = counters.map((c, i) => {
      if (i === index) {
        // í´ë¦­í•œ ì¹´ìš´í„° ì¦ê°€
        return c + 1;
      } else {
        // ë‚˜ë¨¸ì§€ëŠ” ë³€í•˜ì§€ ì•ŠìŒ
        return c;
      }
    });
    setCounters(nextCounters);
  }

  return (
    <ul>
      {counters.map((counter, i) => (
        <li key={i}>
          {counter}
          <button
            onClick={() => {
              handleIncrementClick(i);
            }}
          >
            +1
          </button>
        </li>
      ))}
    </ul>
  );
}
```

![2023-08-28 11 21 48](https://github.com/tamoimi/new-blog/assets/100749520/d1ae5b15-c6ab-4f7d-84d6-d9e87fdbe615)

### ë°°ì—´ì— ì‚½ì…í•˜ê¸°

ê°€ë” ì‹œì‘ë„ ëë„ ì•„ë‹Œ íŠ¹ì • ìœ„ì¹˜ì— í•­ëª©ì„ ì‚½ì…í•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆë‹¤. ì´ë¥¼ ìœ„í•´ `...` ë°°ì—´ ì „ê°œ êµ¬ë¬¸ê³¼ `slice()` ë©”ì„œë“œë¥¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. `slice()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë°°ì—´ì˜ â€œì¡°ê°â€ì„ ì˜ë¼ë‚¼ ìˆ˜ ìˆë‹¤. í•­ëª©ì„ ì‚½ì…í•˜ë ¤ë©´ ì‚½ì… ì§€ì  ì•ì— sliceë¥¼ spreadí•œ ë‹¤ìŒ ìƒˆ í•­ëª©ê³¼ ë‚˜ë¨¸ì§€ ì›ë˜ ë°°ì—´ì„ í¼ì¹˜ëŠ” ë°°ì—´ì„ ë§Œë“ ë‹¤.

ì•„ë˜ ì˜ˆì‹œì—ì„œ ì‚½ì… ë²„íŠ¼ì€ í•­ìƒ ì¸ë±ìŠ¤ `1`ì— ì‚½ì…ëœë‹¤.

```jsx
import { useState } from "react";

let nextId = 3;
const initialArtists = [
  { id: 0, name: "Marta Colvin Andrade" },
  { id: 1, name: "Lamidi Olonade Fakeye" },
  { id: 2, name: "Louise Nevelson" },
];

export default function List() {
  const [name, setName] = useState("");
  const [artists, setArtists] = useState(initialArtists);

  function handleClick() {
    const insertAt = 1; // ì–´ë–¤ indexë‚˜ ë  ìˆ˜ ìˆë‹¤
    const nextArtists = [
      // ì‚½ì…ì  ì•ì˜ í•­ëª©:
      ...artists.slice(0, insertAt),
      // ìƒˆë¡œìš´ í•­ëª©:
      { id: nextId++, name: name },
      // ì‚½ì„ì  ë’¤ì˜ í•­ëª©:
      ...artists.slice(insertAt),
    ];
    setArtists(nextArtists); // --- nextArtists ìœ¼ë¡œ setArtistsì—…ë°ì´íŠ¸
    setName("");
  }

  return (
    <>
      <h1>Inspiring sculptors:</h1>
      <input value={name} onChange={(e) => setName(e.target.value)} />
      <button onClick={handleClick}>Insert</button>
      <ul>
        {artists.map((artist) => (
          <li key={artist.id}>{artist.name}</li>
        ))}
      </ul>
    </>
  );
}
```

![2023-08-29-15-57-03](https://github.com/tamoimi/new-blog/assets/100749520/18ae9d43-d2f3-4dac-92b9-46d11bdd04d4)

### ë°°ì—´ì— ë‹¤ë¥¸ ë³€ê²½ ì‚¬í•­ ì ìš©í•˜ê¸°

ì „ê°œ êµ¬ë¬¸ê³¼ `map()` ë° `filter()`ì™€ ê°™ì€ ë¹„ë³€ì´ ë©”ì„œë“œë§Œìœ¼ë¡œëŠ” í•  ìˆ˜ ì—†ëŠ” ì¼ì´ ëª‡ ê°€ì§€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë°°ì—´ì„ ë°˜ì „ì‹œí‚¤ê±°ë‚˜ ì •ë ¬í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆë‹¤. JavaScript `reverse()` ë° `sort()` ë©”ì„œë“œëŠ” ì›ë˜ ë°°ì—´ì„ ë³€ì´í•˜ë¯€ë¡œ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ëŒ€ì‹ , **ë°°ì—´ì„ ë¨¼ì € ë³µì‚¬í•œ ë‹¤ìŒ ë³€ì´í•  ìˆ˜ ìˆë‹¤.**

```jsx
import { useState } from "react";

let nextId = 3;
const initialList = [
  { id: 0, title: "Big Bellies" },
  { id: 1, title: "Lunar Landscape" },
  { id: 2, title: "Terracotta Army" },
];

export default function List() {
  const [list, setList] = useState(initialList);

  function handleClick() {
    const nextList = [...list]; // --- listë¥¼ ë³µì‚¬í•˜ê³ 
    nextList.reverse(); // --- í´ë¦­ ì‹œ reverse
    setList(nextList); // --- ë³µì‚¬ëœ nextListë¥¼ setting í•¨ìˆ˜ì— ì‚½ì…
  }

  return (
    <>
      <button onClick={handleClick}>Reverse</button>
      <ul>
        {list.map((artwork) => (
          <li key={artwork.id}>{artwork.title}</li>
        ))}
      </ul>
    </>
  );
}
```

![2023-08-29-16-06-14](https://github.com/tamoimi/new-blog/assets/100749520/2a220930-1008-4f87-afbd-440100b156c2)

1.  `[...list]` ì „ê°œ êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë¨¼ì € ì›ë³¸ ë°°ì—´ì˜ ë³µì‚¬ë³¸ì„ ë§Œë“ ë‹¤.
2.  ë³µì‚¬ë³¸ì´ ìƒê²¼ìœ¼ë¯€ë¡œ `nextList.reverse()` ë˜ëŠ” `nextList.sort()`ì™€ ê°™ì€ ë³€ì´ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ `nextList[0] = "something"`ìœ¼ë¡œ ê°œë³„ í•­ëª©ì„ í• ë‹¹í•  ìˆ˜ë„ ìˆë‹¤.

ê·¸ëŸ¬ë‚˜ **ë°°ì—´ì„ ë³µì‚¬í•˜ë”ë¼ë„ ë°°ì—´ ë‚´ë¶€ì˜ ê¸°ì¡´ í•­ëª©ì„ ì§ì ‘ ë³€ì´í•  ìˆ˜ëŠ” ì—†ë‹¤.** ì–•ì€ ë³µì‚¬ê°€ ì´ë£¨ì–´ì ¸ ìƒˆ ë°°ì—´ì—ëŠ” ì›ë˜ ë°°ì—´ê³¼ ë™ì¼í•œ í•­ëª©ì´ í¬í•¨ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ë³µì‚¬ëœ ë°°ì—´ ë‚´ë¶€ì˜ ê°ì²´ë¥¼ ìˆ˜ì •í•˜ë©´ ê¸°ì¡´ stateë¥¼ ë³€ì´í•˜ëŠ” ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ì™€ ê°™ì€ ì½”ë“œê°€ ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤.

```jsx
const nextList = [...list];
nextList[0].seen = true; // Problem: mutates list[0]
setList(nextList);
```

`nextList` ì™€ `list`ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë°°ì—´ì´ì§€ë§Œ, `nextList[0]`ê³¼ `list[0]`ì€ ê°™ì€ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤. ë”°ë¼ì„œ `nextList[0].seen`ì„ ë³€ê²½í•˜ë©´ `list[0].seen`ë„ ë³€ê²½ëœë‹¤. ì´ê²ƒì€ stateë¥¼ ë³€ì´í•˜ê¸° ë•Œë¬¸ì— í”¼í•´ì•¼ í•œë‹¤! [ì¤‘ì²©ëœ JavaScript ê°ì²´ ì—…ë°ì´íŠ¸](https://react.dev/learn/updating-objects-in-state#updating-a-nested-object)ì™€ ë¹„ìŠ·í•œ ë°©ë²•ìœ¼ë¡œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ”ë°, ë³€ê²½í•˜ë ¤ëŠ” ê°œë³„ í•­ëª©ì„ ë³€ì´í•˜ëŠ” ëŒ€ì‹  ë³µì‚¬í•  ìˆ˜ ìˆë‹¤. ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

## ë°°ì—´ ë‚´ë¶€ì˜ ê°ì²´ ì—…ë°ì´íŠ¸í•˜ê¸°

ê°ì²´ëŠ” ì‹¤ì œ ë°°ì—´ â€œë‚´ë¶€â€ì— ìœ„ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤. ì½”ë“œì—ì„œëŠ” â€œë‚´ë¶€â€ì— ìˆëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ë°°ì—´ì˜ ê° ê°ì²´ëŠ” ë°°ì—´ì´ â€œê°€ë¦¬í‚¤ëŠ”â€ ë³„ë„ì˜ ê°’ì´ë‹¤. ê·¸ë˜ì„œ `list[0]`ê³¼ ê°™ì´ ì¤‘ì²©ëœ í•„ë“œë¥¼ ë³€ê²½í•  ë•Œ ì£¼ì˜í•´ì•¼ í•œë‹¤. ë‹¤ë¥¸ ì‚¬ëŒì˜ ì‘í’ˆ ëª©ë¡ì´ ë°°ì—´ì˜ ê°™ì€ ìš”ì†Œë¥¼ ê°€ë¦¬í‚¬ ìˆ˜ ìˆë‹¤!

**ì¤‘ì²©ëœ stateë¥¼ ì—…ë°ì´íŠ¸í•  ë•Œ ì—…ë°ì´íŠ¸í•˜ë ¤ëŠ” ê³³ë¶€í„° ìµœìƒìœ„ ìˆ˜ì¤€ê¹Œì§€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤.**

ì•„ë˜ ì˜ˆì‹œì—ì„œ ë‘ ê°œì˜ ê°œë³„ ì‘í’ˆ ëª©ë¡ì˜ ì´ˆê¸° stateê°€ ë™ì¼í•˜ë‹¤. ë‘ ëª©ë¡ì€ ë¶„ë¦¬ë˜ì–´ì•¼ í•˜ì§€ë§Œ ë³€ì´ë¡œ ì¸í•´ stateê°€ ì‹¤ìˆ˜ë¡œ ê³µìœ ë˜ì–´ í•œ ëª©ë¡ì˜ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•˜ë©´ ë‹¤ë¥¸ ëª©ë¡ì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤:

```jsx
import { useState } from "react";

let nextId = 3;
const initialList = [
  { id: 0, title: "Big Bellies", seen: false },
  { id: 1, title: "Lunar Landscape", seen: false },
  { id: 2, title: "Terracotta Army", seen: true },
];

export default function BucketList() {
  const [myList, setMyList] = useState(initialList);
  const [yourList, setYourList] = useState(initialList);

  function handleToggleMyList(artworkId, nextSeen) {
    const myNextList = [...myList];
    const artwork = myNextList.find((a) => a.id === artworkId);
    artwork.seen = nextSeen;
    setMyList(myNextList);
  }

  function handleToggleYourList(artworkId, nextSeen) {
    const yourNextList = [...yourList];
    const artwork = yourNextList.find((a) => a.id === artworkId);
    artwork.seen = nextSeen;
    setYourList(yourNextList);
  }

  return (
    <>
      <h1>Art Bucket List</h1>
      <h2>My list of art to see:</h2>
      <ItemList artworks={myList} onToggle={handleToggleMyList} />
      <h2>Your list of art to see:</h2>
      <ItemList artworks={yourList} onToggle={handleToggleYourList} />
    </>
  );
}

function ItemList({ artworks, onToggle }) {
  return (
    <ul>
      {artworks.map((artwork) => (
        <li key={artwork.id}>
          <label>
            <input
              type="checkbox"
              checked={artwork.seen}
              onChange={(e) => {
                onToggle(artwork.id, e.target.checked);
              }}
            />
            {artwork.title}
          </label>
        </li>
      ))}
    </ul>
  );
}
```

![2023-08-29-16-42-35](https://github.com/tamoimi/new-blog/assets/100749520/852793d5-e413-4b01-b96a-02f205925a70)

ë¬¸ì œì˜ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```jsx
const myNextList = [...myList];
const artwork = myNextList.find((a) => a.id === artworkId);
artwork.seen = nextSeen; // Problem: ì¡´ì¬í•˜ëŠ” í•­ëª©ì„ ë³€ê²½í•œë‹¤.
setMyList(myNextList);
```

`myNextList` ë°°ì—´ ìì²´ëŠ” ìƒˆ ë°°ì—´ì´ì§€ë§Œ, í•­ëª© ìì²´ëŠ” ì›ë˜ì˜`myList` ë°°ì—´ê³¼ ê°™ë‹¤. ë”°ë¼ì„œ`artwork.seen`ì„ ë³€ê²½í•˜ë©´ ì›ë³¸ `artwork`ê°€ ë³€ê²½ëœë‹¤.

**`map`ì„ ì‚¬ìš©í•˜ì—¬ ì´ì „ í•­ëª©ì— ëŒ€í•œ ë³€ì´ ì—†ì´ ì—…ë°ì´íŠ¸ëœ ë²„ì „ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤.**

```jsx
setMyList(
  myList.map((artwork) => {
    if (artwork.id === artworkId) {
      // ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•˜ì—¬ *ìƒˆë¡œìš´*ê°œì²´ ë§Œë“¤ê¸°
      return { ...artwork, seen: nextSeen };
    } else {
      // No changes
      return artwork;
    }
  }),
);
```

ì—¬ê¸°ì„œ `...`ëŠ” [ê°ì²´ì˜ ë³µì‚¬ë³¸ì„ ë§Œë“œëŠ” ë° ì‚¬ìš©](https://react.dev/learn/updating-objects-in-state#copying-objects-with-the-spread-syntax)ë˜ëŠ” ê°ì²´ ì „ê°œ êµ¬ë¬¸ì´ë‹¤. ì´ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ state í•­ëª©ì´ ë³€ì´ë˜ì§€ ì•Šìœ¼ë©° ë²„ê·¸ê°€ ìˆ˜ì •ëœë‹¤:

ì¼ë°˜ì ìœ¼ë¡œ **ë°©ê¸ˆ ë§Œë“  ê°ì²´ë§Œ ë³€ì´í•´ì•¼ í•œë‹¤.** ìƒˆë¡œìš´ `artwork`ì„ ì‚½ì…í•˜ëŠ” ê²½ìš°ì—ëŠ” ë³€ì´í•´ë„ ë˜ì§€ë§Œ, ì´ë¯¸ ìˆëŠ” stateì˜ `artwork`ì„ ë‹¤ë£¨ëŠ” ê²½ìš°ì—ëŠ” ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

### Immerë¡œ ê°„ê²°í•œ ì—…ë°ì´íŠ¸ ë¡œì§ ì‘ì„±í•˜ê¸°

ì¤‘ì²© ë°°ì—´ì„ ë³€ì´ ì—†ì´ ì—…ë°ì´íŠ¸í•˜ëŠ” ì‘ì—…ì€ [ê°ì²´ë¥¼ ë‹¤ë£° ë•Œ ì²˜ëŸ¼](https://react.dev/learn/updating-objects-in-state#write-concise-update-logic-with-immer) ì•½ê°„ ë°˜ë³µì ì¼ ìˆ˜ ìˆë‹¤:

- ì¼ë°˜ì ìœ¼ë¡œ stateë¥¼ ëª‡ ë ˆë²¨ ì´ìƒ ê¹Šì´ ì—…ë°ì´íŠ¸í•  í•„ìš”ëŠ” ì—†ë‹¤. state ê°ì²´ê°€ ë§¤ìš° ê¹Šë‹¤ë©´Â [ë‹¤ë¥´ê²Œ ì¬êµ¬ì„±](https://react.dev/learn/choosing-the-state-structure#avoid-deeply-nested-state)í•˜ì—¬ í‰í‰í•˜ê²Œ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤.
- state êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´,Â [Immer](https://github.com/immerjs/use-immer)ë¥¼ ì‚¬ìš©í•˜ì. ImmerëŠ” ë³€ì´ êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì‘ì„±í•˜ë”ë¼ë„ ìë™ìœ¼ë¡œ ì‚¬ë³¸ ìƒì„±ì„ ì²˜ë¦¬í•´ ì£¼ì–´ í¸ë¦¬í•˜ë‹¤.

ë‹¤ìŒì€ Immerë¡œ ì¬ì‘ì„±í•œ Art Bucket List ì˜ˆì‹œì´ë‹¤:

```jsx
import { useState } from "react";
import { useImmer } from "use-immer";

let nextId = 3;
const initialList = [
  { id: 0, title: "Big Bellies", seen: false },
  { id: 1, title: "Lunar Landscape", seen: false },
  { id: 2, title: "Terracotta Army", seen: true },
];

export default function BucketList() {
  const [myList, updateMyList] = useImmer(initialList);
  const [yourList, updateYourList] = useImmer(initialList);

  function handleToggleMyList(id, nextSeen) {
    updateMyList((draft) => {
      const artwork = draft.find((a) => a.id === id);
      artwork.seen = nextSeen;
    });
  }

  function handleToggleYourList(artworkId, nextSeen) {
    updateYourList((draft) => {
      const artwork = draft.find((a) => a.id === artworkId);
      artwork.seen = nextSeen;
    });
  }

  return (
    <>
      <h1>Art Bucket List</h1>
      <h2>My list of art to see:</h2>
      <ItemList artworks={myList} onToggle={handleToggleMyList} />
      <h2>Your list of art to see:</h2>
      <ItemList artworks={yourList} onToggle={handleToggleYourList} />
    </>
  );
}

function ItemList({ artworks, onToggle }) {
  return (
    <ul>
      {artworks.map((artwork) => (
        <li key={artwork.id}>
          <label>
            <input
              type="checkbox"
              checked={artwork.seen}
              onChange={(e) => {
                onToggle(artwork.id, e.target.checked);
              }}
            />
            {artwork.title}
          </label>
        </li>
      ))}
    </ul>
  );
}
```

![2023-08-29-17-03-13](https://github.com/tamoimi/new-blog/assets/100749520/a68797b7-4873-4514-91c7-7dc4c67bb4d3)

**Immerë¥¼ ì‚¬ìš©í•˜ë©´ `artwork.seen = nextSeen`ê³¼ ê°™ì€ ë³€ì´ë„ ê´œì°®ë‹¤:**

```jsx
updateMyTodos((draft) => {
  const artwork = draft.find((a) => a.id === artworkId);
  artwork.seen = nextSeen;
});
```

ì´ëŠ” ì›ë³¸ stateë¥¼ ë³€ì´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Immerê°€ ì œê³µí•˜ëŠ” íŠ¹ë³„í•œ `draft`ê°ì²´ë¥¼ ë³€ì´í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë˜ `push()` ë° `pop()`ê³¼ ê°™ì€ ë³€ì´ ë©”ì„œë“œë¥¼ `draft`ì˜ ì½˜í…ì¸ ì— ì ìš©í•  ìˆ˜ ìˆë‹¤.

ë’¤ì—ì„œ ImmerëŠ” í•­ìƒ ì‚¬ìš©ìê°€ `draft`ì— ì ìš©í•œ ë³€ê²½ ì‚¬í•­ì— ë”°ë¼ ë‹¤ìŒ stateë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ êµ¬ì„±í•œë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ stateë¥¼ ë³€ì´í•˜ì§€ ì•Šê³ ë„ ë§¤ìš° ê°„ê²°í•˜ê²Œ ìœ ì§€ëœë‹¤.

## ìš”ì•½

- ë°°ì—´ì„ stateì— ë„£ì„ ìˆ˜ëŠ” ìˆì§€ë§Œ ë³€ê²½í•  ìˆ˜ëŠ” ì—†ë‹¤.
- ë°°ì—´ì„ ë³€ì´í•˜ëŠ” ëŒ€ì‹  ë°°ì—´ì˜Â ìƒˆë¡œìš´Â ë²„ì „ì„ ìƒì„±í•˜ê³  stateë¥¼ ì—…ë°ì´íŠ¸í•˜ì.
- ë°°ì—´ ì „ê°œ êµ¬ë¬¸Â `[...arr, newItem]`ì„ ì‚¬ìš©í•˜ì—¬ ìƒˆ í•­ëª©ìœ¼ë¡œ ë°°ì—´ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- `filter()`Â ë°Â `map()`ì„ ì‚¬ìš©í•˜ì—¬ í•„í„°ë§ë˜ê±°ë‚˜ ë³€í˜•ëœ í•­ëª©ìœ¼ë¡œ ìƒˆ ë°°ì—´ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- Immerë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
