---
title: "[React Docs ver.2] Extracting State Logic into a Reducer - Stateë¡œì§ì„ Reducerë¡œ ì¶”ì¶œí•˜ê¸°"
date: "2023-09-07"
template: "post"
draft: false
slug: "/posts/react-doc-v2-23"
category: "React"
tags:
  - "React"
description: "ë¦¬ì•¡íŠ¸ ìƒˆë¡œìš´ ê³µì‹ë¬¸ì„œë¥¼ ì½ê³  ì •ë¦¬í•œ ê¸€"
# socialImage: "./media/42-line-bible.jpg"
---

> ğŸ³ ë³¸ ê²Œì‹œê¸€ì€ ë¦¬ì•¡íŠ¸ì˜ ìƒˆë¡œìš´Â [ê³µì‹ë¬¸ì„œ](https://react.dev/learn/extracting-state-logic-into-a-reducer)ë¥¼ ì½ê³  ì •ë¦¬í•œ ê¸€ì´ë‹¤.

ğŸ¦¦ **ëª©ì°¨**

- [Overview](#overview)
- [reducerë¡œ stateë¡œì§ í†µí•©í•˜ê¸°](#reducerë¡œ-stateë¡œì§-í†µí•©í•˜ê¸°)
  - [Step 1: state ì„¤ì •ì„ actionë“¤ì˜ ì „ë‹¬ë¡œ ë°”ê¾¸ê¸°](#step-1-state-ì„¤ì •ì„-actionë“¤ì˜-ì „ë‹¬ë¡œ-ë°”ê¾¸ê¸°)
  - [Step 2: reducerí•¨ìˆ˜ ì‘ì„±í•˜ê¸°](#step-2-reducerí•¨ìˆ˜-ì‘ì„±í•˜ê¸°)
  - [ğŸ‹ DEEP DIVE](#-deep-dive)
  - [Step 3: ì»´í¬ë„ŒíŠ¸ì—ì„œ reducerì‚¬ìš©í•˜ê¸°](#step-3-ì»´í¬ë„ŒíŠ¸ì—ì„œ-reducerì‚¬ìš©í•˜ê¸°)

## Overview

ì—¬ëŸ¬ ê°œì˜ state ì—…ë°ì´íŠ¸ê°€ ì—¬ëŸ¬ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ë¶„ì‚°ë˜ì–´ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” ê³¼ë¶€í•˜ê°€ ê±¸ë¦´ ìˆ˜ ìˆë‹¤. ì´ ìƒí™©ì—ì„œ **reducer** ë¼ê³  ë¶ˆë¦¬ëŠ” ë‹¨ì¼ í•¨ìˆ˜ë¥¼ í†µí•´ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì˜ ëª¨ë“  state ì—…ë°ì´íŠ¸ ë¡œì§ì„ í†µí•©í•  ìˆ˜ ìˆë‹¤.

## reducerë¡œ stateë¡œì§ í†µí•©í•˜ê¸°

ì»´í¬ë„ŒíŠ¸ê°€ ë³µì¡í•´ì§ˆìˆ˜ë¡ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì˜ stateê°€ ì—…ë°ì´íŠ¸ ë˜ëŠ”ì§€ ì°¾ê¸° ì–´ë µë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ì˜ `TaskApp`ì»´í¬ë„ŒíŠ¸ëŠ” stateì— `tasks`ë°°ì—´ì„ ê°€ì§€ê³  ìˆê³  ì„¸ ê°€ì§€ì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•´ tastë¥¼ ì¶”ê°€, ì œê±°, ìˆ˜ì •í•œë‹¤:

```jsx
import { useState } from "react";
import AddTask from "./AddTask.js";
import TaskList from "./TaskList.js";

export default function TaskApp() {
  const [tasks, setTasks] = useState(initialTasks);

  function handleAddTask(text) {
    setTasks([
      ...tasks,
      {
        id: nextId++,
        text: text,
        done: false,
      },
    ]);
  }

  function handleChangeTask(task) {
    setTasks(
      tasks.map((t) => {
        if (t.id === task.id) {
          return task;
        } else {
          return t;
        }
      }),
    );
  }

  function handleDeleteTask(taskId) {
    setTasks(tasks.filter((t) => t.id !== taskId));
  }

  return (
    <>
      <h1>Prague itinerary</h1>
      <AddTask onAddTask={handleAddTask} />
      <TaskList
        tasks={tasks}
        onChangeTask={handleChangeTask}
        onDeleteTask={handleDeleteTask}
      />
    </>
  );
}

let nextId = 3;
const initialTasks = [
  { id: 0, text: "Visit Kafka Museum", done: true },
  { id: 1, text: "Watch a puppet show", done: false },
  { id: 2, text: "Lennon Wall pic", done: false },
];
```

![2023-09-07-10-41-24](https://github.com/tamoimi/new-blog/assets/100749520/a7dad360-294a-4cfd-b00c-7c2ec214c5d6)

ê° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” stateë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ `setTasks`ë¥¼ ë¶€ë¥¸ë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ê°€ ì»¤ì§ˆìˆ˜ë¡ stateë¡œì§ì˜ ì–‘ë„ ì»¤ì§„ë‹¤. ë³µì¡ì„±ì„ ì¤„ì´ê³  ëª¨ë“  ë¡œì§ì„ ì ‘ê·¼í•˜ê¸° ì‰½ê²Œ í•œ ê³³ì— ëª¨ìœ¼ê¸° ìœ„í•´ state ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì˜ **reducer**ë¼ê³  í•˜ëŠ” ë‹¨ì¼ í•¨ìˆ˜ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆë‹¤.

ReducerëŠ” stateë¥¼ ê´€ë¦¬í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ì´ë‹¤. 3ë‹¨ê³„ë¡œ `useState`ì—ì„œ `useReducer`ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•  ìˆ˜ ìˆë‹¤.

1. stateë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì—ì„œ actionë“¤ì„ ì „ë‹¬í•˜ëŠ” ê²ƒìœ¼ë¡œÂ **ë³€ê²½**í•˜ê¸°
2. reducer í•¨ìˆ˜Â **ì‘ì„±**í•˜ê¸°
3. ì»´í¬ë„ŒíŠ¸ì—ì„œ reducerÂ **ì‚¬ìš©**í•˜ê¸°

### Step 1: state ì„¤ì •ì„ actionë“¤ì˜ ì „ë‹¬ë¡œ ë°”ê¾¸ê¸°

í˜„ì¬ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” stateë¥¼ ì„¤ì •í•˜ì—¬ ìˆ˜í–‰í•  ì‘ì—…ì„ ì§€ì •í•˜ê³  ìˆë‹¤:

```jsx
function handleAddTask(text) {
  setTasks([
    ...tasks,
    {
      id: nextId++,
      text: text,
      done: false,
    },
  ]);
}

function handleChangeTask(task) {
  setTasks(
    tasks.map((t) => {
      if (t.id === task.id) {
        return task;
      } else {
        return t;
      }
    }),
  );
}

function handleDeleteTask(taskId) {
  setTasks(tasks.filter((t) => t.id !== taskId));
}
```

ëª¨ë“  state ì„¤ì • ë¡œì§ì„ ì œê±°í•œë‹¤. ì´ì œ ì„¸ ê°œì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë§Œ ë‚¨ëŠ”ë‹¤:

- ì‚¬ìš©ìê°€ â€œAddâ€ë¥¼ ëˆ„ë¥´ë©´Â `handleAddTask(text)`ê°€ í˜¸ì¶œ.ëœë‹¤
- ì‚¬ìš©ìê°€ taskë¥¼ í† ê¸€í•˜ê±°ë‚˜ â€œSaveâ€ë¥¼ ëˆ„ë¥´ë©´Â `handleChangeTask(task)`ê°€ í˜¸ì¶œëœë‹¤.
- ì‚¬ìš©ìê°€ â€œDeleteâ€ë¥¼ ëˆ„ë¥´ë©´Â `handleDeleteTask(taskId)`ê°€ í˜¸ì¶œëœë‹¤.

reducerë¥¼ ì‚¬ìš©í•œ state ê´€ë¦¬ëŠ” stateë¥¼ ì§ì ‘ ì„¤ì •í•˜ëŠ” ê²ƒê³¼ ì•½ê°„ ë‹¤ë¥´ë‹¤. stateë¥¼ ì„¤ì •í•˜ì—¬ Reactì— â€œë­˜ í• ì§€â€ë¥¼ ì§€ì‹œí•˜ëŠ” ëŒ€ì‹ , ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ â€œactionâ€ì„ ì „ë‹¬í•´ â€œì‚¬ìš©ìê°€ ë°©ê¸ˆ í•œì¼â€ì„ ì§€ì •í•œë‹¤. (state ì—…ë°ì´íŠ¸ ë¡œì§ì€ ë‹¤ë¥¸ ê³³ì— ìˆë‹¤!) ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í†µí•´ â€`tasks`ë¥¼ ì„¤ì •â€í•˜ëŠ” ëŒ€ì‹  â€œtaskë¥¼ ì¶”ê°€/ë³€ê²½/ì‚­ì œâ€í•˜ëŠ” **action**ì„ ì „ë‹¬í•˜ëŠ” ê²ƒì´ë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì€ ì‚¬ìš©ìì˜ ì˜ë„ë¥¼ ë” ëª…í™•í•˜ê²Œ ì„¤ëª…í•œë‹¤.

```jsx
function handleAddTask(text) {
  dispatch({
    type: "added",
    id: nextId++,
    text: text,
  });
}

function handleChangeTask(task) {
  dispatch({
    type: "changed",
    task: task,
  });
}

function handleDeleteTask(taskId) {
  dispatch({
    type: "deleted",
    id: taskId,
  });
}
```

`dispatch`Â í•¨ìˆ˜ì— ì „ë‹¬í•œ ê°ì²´ë¥¼ â€œactionâ€ ì´ë¼ê³  í•œë‹¤:

```jsx
function handleDeleteTask(taskId) {
  dispatch(
    // "action" object:
    {
      type: "deleted",
      id: taskId,
    },
  );
}
```

ì´ê²ƒì€ ì¼ë°˜ì ì¸ JavaScript ê°ì²´ë‹¤. ì–´ë–¤ê±¸ ë„£ì„ì§€ ì •í• ìˆ˜ ìˆì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ì— ëŒ€í•œ ìµœì†Œí•œì˜ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•œë‹¤. (`dispatch`í•¨ìˆ˜ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì¶”ê°€)

> ğŸ“ƒ **Note**

action ê°ì²´ëŠ” ì–´ë– í•œ ëª¨ì–‘ì´ ë  ìˆ˜ ìˆë‹¤.

ê´€ë¡€ì— ë”°ë¼ ë°œìƒí•œ ì¼ì„ ì„¤ëª…í•˜ëŠ” ë¬¸ìì—´ `type`ì„ ì œê³µí•˜ê³  ë‹¤ë¥¸ í•„ë“œì— ì¶”ê°€ ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. `type`ì€ ì»´í¬ë„ŒíŠ¸ì— ë”°ë¼ ë‹¤ë¥´ë¯€ë¡œ ì•„ë˜ ì˜ˆì œì—ì„œëŠ” `'added'` ë˜ëŠ” `'added_task'`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” ì´ë¦„ì„ ì„ íƒí•˜ì!

```jsx
dispatch({
  // specific to component
  type: "what_happened",
  // other fields go here
});
```

### Step 2: reducerí•¨ìˆ˜ ì‘ì„±í•˜ê¸°

reducerí•¨ìˆ˜ì— stateì— ë¡œì§ì„ ë‘˜ ìˆ˜ ìˆë‹¤. ì´ê²ƒì€ ë‘ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§€ëŠ”ë°, í˜„ì¬state, actionê°ì²´ì´ë‹¤. ê·¸ë¦¬ê³  ë‹¤ìŒ stateë¥¼ ë°˜í™˜í•œë‹¤.

```jsx
function yourReducer(state, action) {
  // return next state for React to set
}
```

ReactëŠ” reducerì—ì„œ ë°˜í™˜í•œ ê²ƒì„ stateë¡œ ì„¤ì •í•  ê²ƒì´ë‹¤.

stateë¥¼ ì„¤ì •í•˜ëŠ” ë¡œì§ì„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ reducer í•¨ìˆ˜ë¡œ ì˜®ê¸°ê¸° ìœ„í•´ì„œ ë‹¤ìŒì„ ì§„í–‰í•˜ì:

1. í˜„ì¬ state (`tasks`)ë¥¼ ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì„ ì–¸í•œë‹¤.
2. `action` ê°ì²´ëŠ” ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì„ ì–¸í•œë‹¤.
3. ë‹¤ìŒÂ stateë¥¼ reducer í•¨ìˆ˜ì—ì„œ ë°˜í™˜í•œë‹¤. (Reactê°€ stateë¡œ ì„¤ì •í•œë‹¤.)

ì•„ë˜ëŠ” ëª¨ë“  state ì„¤ì • ë¡œì§ì„ reducer í•¨ìˆ˜ë¡œ ì˜®ê¸´ ë‚´ìš©ì´ë‹¤:

```jsx
function tasksReducer(tasks, action) {
  if (action.type === "added") {
    return [
      ...tasks,
      {
        id: action.id,
        text: action.text,
        done: false,
      },
    ];
  } else if (action.type === "changed") {
    return tasks.map((t) => {
      if (t.id === action.task.id) {
        return action.task;
      } else {
        return t;
      }
    });
  } else if (action.type === "deleted") {
    return tasks.filter((t) => t.id !== action.id);
  } else {
    throw Error("Unknown action: " + action.type);
  }
}
```

reducer í•¨ìˆ˜ëŠ” state(`tasks`)ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ê°–ê¸° ë•Œë¬¸ì—, **ì»´í¬ë„ŒíŠ¸ ë°–ì—ì„œ reducer í•¨ìˆ˜ë¥¼ ì„ ì–¸**í•  ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë“¤ì—¬ì“°ê¸° ë‹¨ê³„ë„ ì¤„ì´ê³  ì½”ë“œë¥¼ ì½ê¸° ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

> ğŸ“ƒ **Note**

ìœ„ ì½”ë“œëŠ” `if/else`êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì§€ë§Œ reducerì•ˆì—ì„œ [switchë¬¸](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/switch)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê´€ë¡€ì´ë‹¤. ê²°ê³¼ëŠ” ê°™ì§€ë§Œ switchë¬¸ì„ ì½ê¸°ê°€ ë” ì‰½ë‹¤.

ì´ ë¬¸ì„œì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ reducer í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ë³´ì:

```jsx
function tasksReducer(tasks, action) {
  switch (action.type) {
    case "added": {
      return [
        ...tasks,
        {
          id: action.id,
          text: action.text,
          done: false,
        },
      ];
    }
    case "changed": {
      return tasks.map((t) => {
        if (t.id === action.task.id) {
          return action.task;
        } else {
          return t;
        }
      });
    }
    case "deleted": {
      return tasks.filter((t) => t.id !== action.id);
    }
    default: {
      throw Error("Unknown action: " + action.type);
    }
  }
}
```

ë‹¤ë¥¸ `case`ì•ˆì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜ë“¤ì´ ì„œë¡œ ì¶©ëŒí•˜ì§€ ì•Šê¸° ìœ„í•´`case` ë¸”ëŸ­ì„ ëª¨ë‘ ì¤‘ê´„í˜¸ `{` ì™€ `}`ë¡œ ê°ì‹¸ëŠ” ê±¸ ì¶”ì²œí•œë‹¤. ë˜í•œ, í•˜ë‚˜ì˜ `case`ëŠ” ë³´í†µ `return`ìœ¼ë¡œ ëë‚˜ì•¼í•œë‹¤. ë§Œì•½ `return`ì„ ìŠìœ¼ë©´ ì´ ì½”ë“œëŠ” ë‹¤ìŒ `case`ì— ë¹ ì§€ê²Œ ë  ê²ƒì´ê³ , ì´ëŠ” ì‹¤ìˆ˜ë¡œ ì´ì–´ì§„ë‹¤.

ì•„ì§ switch êµ¬ë¬¸ì— ìµìˆ™í•˜ì§€ ì•Šë‹¤ë©´, if/elseë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ì „í˜€ ì§€ì¥ì—†ë‹¤.

### ğŸ³ DEEP DIVE

**ì™œ reducerì´ë¼ê³  ë¶€ë¥¼ê¹Œ?**

reducerë“¤ì´ ë¹„ë¡ ì»´í¬ë„ŒíŠ¸ ì•ˆì— ìˆëŠ” ì½”ë“œì˜ ì–‘ì„ â€œì¤„ì—¬ì£¼ê¸´â€ í•˜ì§€ë§Œ, ì‚¬ì‹¤ ë°°ì—´ì—ì„œ ì‚¬ìš©í•˜ëŠ” [reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce) ì—°ì‚°ì„ ë”°ì„œ ì§€ì€ ì´ë¦„ì´ë‹¤.

`reduce()`ì—°ì‚°ì€ ë°°ì—´ì„ ê°€ì§€ê³  ë§ì€ ê°’ë“¤ì„ í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ â€œëˆ„ì â€í•  ìˆ˜ ìˆë‹¤:

```jsx
const arr = [1, 2, 3, 4, 5];
const sum = arr.reduce((result, number) => result + number); // 1 + 2 + 3 + 4 + 5
```

ì´ `reduce`í•¨ìˆ˜ê°€ â€œreducerâ€ë¡œ ì•Œë ¤ì ¸ ìˆë‹¤. ì§€ê¸ˆê¹Œì§€ì˜ ê²°ê³¼ ì™€ í˜„ì¬ì˜ ì•„ì´í…œ ì„ ê°€ì§€ê³ , ë‹¤ìŒ ê²°ê³¼ ë¥¼ ë°˜í™˜í•œë‹¤. React reducerëŠ” ì´ ì•„ì´ë””ì–´ì™€ ë˜‘ê°™ì€ ì˜ˆì‹œì´ë‹¤. React reducerë„ ì§€ê¸ˆê¹Œì§€ì˜ state ì™€ action ì„ ê°€ì§€ê³  ë‹¤ìŒ state ë¥¼ ë°˜í™˜í•œë‹¤. ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì‹œê°„ì´ ì§€ë‚˜ë©´ì„œ actionë“¤ì„ stateë¡œ ëª¨ìœ¼ê²Œ ëœë‹¤.

ì‹¬ì§€ì–´ `reduce()` ë©”ì„œë“œë¥¼ `initialState`ì™€ `actions` ë°°ì—´ì„ ì‚¬ìš©í•´ì„œ reducerë¡œ ìµœì¢… stateë¥¼ ê³„ì‚°í•  ìˆ˜ë„ ìˆë‹¤.

### Step 3: ì»´í¬ë„ŒíŠ¸ì—ì„œ reducerì‚¬ìš©í•˜ê¸°

ë§ˆì§€ë§‰ìœ¼ë¡œ, `tasksReducer`ë¥¼ ì»´í¬ë„ŒíŠ¸ì— ì—°ê²°í•´ì•¼ í•œë‹¤. Reactì—ì„œ `useReducer` Hookì„ importí•˜ì:

```jsx
import { useReducer } from "react";
```

ê·¸ë¦¬ê³  `useState`ë¥¼ `useReducer`ë¡œ ë°”ê¾¼ë‹¤:

```jsx
const [tasks, setTasks] = useState(initialTasks); // --- ìˆ˜ì • ì „ âŒ

const [tasks, dispatch] = useReducer(tasksReducer, initialTasks); // --- ìˆ˜ì • í›„ â­•
```

`useReducer` Hookì€ `useState`ì™€ ë¹„ìŠ·í•˜ë‹¤. ì´ˆê¸° state ê°’ì„ ì „ë‹¬í•´ì•¼ í•˜ê³  ê·¸ ê²°ê³¼ë¡œ state ê°’ê³¼ state ì„¤ì •ì í•¨ìˆ˜(useReducerì˜ ê²½ìš° dispatch í•¨ìˆ˜)ë¥¼ ë°˜í™˜í•œë‹¤. í•˜ì§€ë§Œ ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤.

`useReducer` Hookì€ ë‘ ê°œì˜ ì¸ìë¥¼ ë°›ëŠ”ë‹¤:

1. reducer í•¨ìˆ˜
2. ì´ˆê¸° state

ê·¸ë¦¬ê³  ì•„ë˜ ë‚´ìš©ì„ ë°˜í™˜í•œë‹¤:

1. stateê°’
2. dispatch í•¨ìˆ˜ (ì‚¬ìš©ìì˜ actionì„ reducerì— â€œì „ë‹¬â€í•´ì£¼ëŠ” í•¨ìˆ˜)

ì´ì œ ì™„ì „íˆ ì—°ê²°ëë‹¤! reducerëŠ” ì»´í¬ë„ŒíŠ¸ íŒŒì¼ í•˜ë‹¨ì— ì„ ì–¸ë˜ì–´ ìˆë‹¤:

```jsx
import { useReducer } from "react";
import AddTask from "./AddTask.js";
import TaskList from "./TaskList.js";

export default function TaskApp() {
  const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);

  function handleAddTask(text) {
    dispatch({
      type: "added",
      id: nextId++,
      text: text,
    });
  }

  function handleChangeTask(task) {
    dispatch({
      type: "changed",
      task: task,
    });
  }

  function handleDeleteTask(taskId) {
    dispatch({
      type: "deleted",
      id: taskId,
    });
  }

  return (
    <>
      <h1>Prague itinerary</h1>
      <AddTask onAddTask={handleAddTask} />
      <TaskList
        tasks={tasks}
        onChangeTask={handleChangeTask}
        onDeleteTask={handleDeleteTask}
      />
    </>
  );
}

function tasksReducer(tasks, action) {
  switch (action.type) {
    case "added": {
      return [
        // ğŸš¨ --- ì›í•œë‹¤ë©´ reducerë¥¼ ë‹¤ë¥¸ íŒŒì¼ë¡œ ì˜®ê¸¸ìˆ˜ë„ ìˆë‹¤.
        ...tasks,
        {
          id: action.id,
          text: action.text,
          done: false,
        },
      ];
    }
    case "changed": {
      return tasks.map((t) => {
        if (t.id === action.task.id) {
          return action.task;
        } else {
          return t;
        }
      });
    }
    case "deleted": {
      return tasks.filter((t) => t.id !== action.id);
    }
    default: {
      throw Error("Unknown action: " + action.type);
    }
  }
}

let nextId = 3;
const initialTasks = [
  { id: 0, text: "Visit Kafka Museum", done: true },
  { id: 1, text: "Watch a puppet show", done: false },
  { id: 2, text: "Lennon Wall pic", done: false },
];
```

ì´ë ‡ê²Œ ë¶„ë¦¬í•˜ë©´ ì»´í¬ë„ŒíŠ¸ ë¡œì§ì„ ë” ì‰½ê²Œ ì½ì„ ìˆ˜ ìˆë‹¤. ì´ì œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” actionì„ ì „ë‹¬í•˜ì—¬ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ë§Œ ì§€ì •í•˜ê³ , reducer í•¨ìˆ˜ëŠ” actionì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ stateê°€ ì–´ë–»ê²Œ ë³€ê²½ë˜ëŠ”ì§€ ê²°ì •í•œë‹¤.

## `useState`ì™€ `useReducer` ë¹„êµí•˜ê¸°

Reducerì— ë‹¨ì ì´ ì—†ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤! ì•„ë˜ ë‚´ìš©ì„ ì‚´í´ë³´ì:

- **ì½”ë“œ ì‚¬ì´ì¦ˆ:** ì¼ë°˜ì ìœ¼ë¡œ `useState`ëŠ” ë¯¸ë¦¬ ì‘ì„±í•´ì•¼ í•˜ëŠ” ì½”ë“œê°€ ì ë‹¤. `useReducer`ëŠ” reducerí•¨ìˆ˜ì™€ dispatch actionì„ ë‘˜ ë‹¤ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ê·¸ëŸ¬ë‚˜ `useReducer`ëŠ” ë§ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ stateë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê²½ìš° ì½”ë“œë¥¼ ì¤„ì´ëŠ”ê±¸ ë„ì™€ì¤€ë‹¤.
- **ê°€ë…ì„±**: `useState`ëŠ” ê°„ë‹¨í•œ stateë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê²½ìš° ì•„ì£¼ ì½ê¸° ì‰½ë‹¤. í•˜ì§€ë§Œ stateê°€ ì¡°ê¸ˆ ë” ë³µì¡í•´ ì§ˆìˆ˜ë¡ ì»´í¬ë„ŒíŠ¸ì˜ ì½”ë“œ ì–‘ì´ í™•ì¥ë˜ê³  ì½ê¸° ì–´ë µë‹¤. ì´ëŸ° ê²½ìš°, `useReducer`ëŠ” ì—…ë°ì´íŠ¸ ë¡œì§ì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í†µí•´ ë¬´ì—‡ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ê¹”ë”í•˜ê²Œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.
- **ë””ë²„ê¹…**: `useState`ì— ë²„ê·¸ê°€ ìƒê¸´ ê²¨ìš°, ì™œ, ì–´ë–¤ stateê°€ í‹€ë ¸ëŠ”ì§€ ì•Œê¸° ì–´ë µë‹¤. `useReducer`ëŠ” concole.logë¥¼ reducerì— ì¶”ê°€í•˜ì—¬ state ì—…ë°ì´íŠ¸ë¥¼ í™•ì¸í•˜ê³  ì™œ ë²„ê·¸ê°€ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤. (ì–´ë–¤ `action`ìœ¼ë¡œ ì¸í•´) ê° `action`ì´ ì •í™•í•˜ë‹¤ë©´, ë²„ê·¸ê°€ reducer ë¡œì§ ìì²´ì— ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§ŒÂ `useState`ë¥¼ ì‚¬ìš©í•  ë•Œë³´ë‹¤ ë” ë§ì€ ì½”ë“œë¥¼ ì‚´í´ë´ì•¼ í•œë‹¤.
- **í…ŒìŠ¤íŠ¸**: reducerëŠ” ì»´í¬ë„ŒíŠ¸ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ìˆœìˆ˜ í•¨ìˆ˜ë‹¤. ì¦‰, ë¶„ë¦¬í•´ì„œ ë‚´ë³´ë‚´ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë³´ë‹¤ í˜„ì‹¤ì ì¸ í™˜ê²½ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ì§€ë§Œ, ë³µì¡í•œ state ì—…ë°ì´íŠ¸ ë¡œì§ì˜ ê²½ìš° reducerê°€ íŠ¹ì • ì´ˆê¸° stateì™€ actionì— ëŒ€í•´ íŠ¹ì • stateë¥¼ ë°˜í™˜í•œë‹¤ê³  ë‹¨ì–¸í•˜ëŠ” ê²ƒì´ ìœ ìš©í•  ìˆ˜ ìˆë‹¤.
- **ê°œì¸ ì·¨í–¥**: ëª‡ëª‡ì˜ ì‚¬ëŒë“¤ì€ reducerë¥¼ ì¢‹ì•„í•˜ê³  ëª‡ëª‡ ì‚¬ëŒë“¤ì€ ì¢‹ì•„í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ê±´ ê´œì°®ë‹¤. ì·¨í–¥ì˜ ë¬¸ì œì´ë‹¤.Â `useState`Â ì™€Â `useReducer`ëŠ” ì–¸ì œë“ ì§€ ì•ë’¤ë¡œ ë³€í™˜í•  ìˆ˜ ìˆê³ , ì„œë¡œ ë™ë“±í•˜ë‹¤!

ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì˜ëª»ëœ state ì—…ë°ì´íŠ¸ë¡œ ì¸í•´ ë²„ê·¸ê°€ ìì£¼ ë°œìƒí•˜ê³  ì½”ë“œì— ë” ë§ì€ êµ¬ì¡°ë¥¼ ë„ì…í•˜ë ¤ëŠ” ê²½ìš° reducerë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì— reducerë¥¼ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ë‹¤: ììœ ë¡­ê²Œ ì„ì–´ì„œ ì‚¬ìš©í•˜ì! ì‹¬ì§€ì–´ ê°™ì€ ì»´í¬ë„ŒíŠ¸ì—ì„œ `useState`ì™€ `useReducer`ë¥¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## reducer ì˜ ì‘ì„±í•˜ê¸°

reducerë¥¼ ì‘ì„±í•  ë•Œ ì•„ë˜ ë‘ê°€ì§€ íŒì„ ê¸°ì–µí•˜ì:

- **ReducerëŠ” ë°˜ë“œì‹œ ìˆœìˆ˜í•´ì•¼ í•œë‹¤**. [state ì—…ë°ì´í„° í•¨ìˆ˜](https://react.dev/learn/queueing-a-series-of-state-updates)ì™€ ë¹„ìŠ·í•˜ê²Œ reducerëŠ” ë Œë”ë§ ì¤‘ ì‹¤í–‰ëœë‹¤! (actionì€ ë‹¤ìŒ ë Œë”ë§ê¹Œì§€ ëŒ€ê¸°í•œë‹¤.) ì¦‰, reducerëŠ” [ë°˜ë“œì‹œ ìˆœìˆ˜í•´ì•¼ í•œë‹¤](https://react.dev/learn/keeping-components-pure). â€” ê°™ì€ inputì€ í•­ìƒ ê°™ì€ outputì„ ê²°ê³¼ë¡œ ê°€ì§„ë‹¤. ìš”ì²­ì„ ë³´ë‚´ê±°ë‚˜ timeoutì„ ìŠ¤ì¼€ì¥´ë§í•˜ê±°ë‚˜ ì‚¬ì´ë“œ ì´í™íŠ¸(ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì‘ì—…)ì„ ìˆ˜í–‰í•´ì„œëŠ” ì•ˆëœë‹¤. reducerëŠ” [ê°ì²´](https://react.dev/learn/updating-objects-in-state) ë° [ë°°ì—´](https://react.dev/learn/updating-arrays-in-state)ì„ ë³€ì´ ì—†ì´ ì—…ë°ì´íŠ¸í•´ì•¼ í•œë‹¤.
- **ê° actionì€ ì—¬ëŸ¬ ë°ì´í„°ê°€ ë³€ê²½ë˜ì–´ë„ í•˜ë‚˜ì˜ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì„ ë¬˜ì‚¬í•œë‹¤.** ì˜ˆë¥¼ ë“¤ì–´ ìœ ì €ê°€ reducerê°€ ê´€ë¦¬í•˜ëŠ” 5ê°œì˜ í•„ë“œê°€ ìˆëŠ” í¼ì—ì„œ â€œResetâ€ì„ ëˆ„ë¥¸ ê²½ìš°, 5ê°œì˜ ê°œë³„ `set_field action`ë³´ë‹¤ í•˜ë‚˜ì˜ `reset_form action`ì„ ì „ì†¡í•˜ëŠ” ê²ƒì´ ë” í•©ë¦¬ì ì´ë‹¤. ëª¨ë“  actionì„ reducerì— ê¸°ë¡í•˜ë©´ ì–´ë–¤ ìƒí˜¸ì‘ìš©ì´ë‚˜ ì‘ë‹µì´ ì–´ë–¤ ìˆœì„œë¡œ ì¼ì–´ë‚¬ëŠ”ì§€ ì¬ê¶ì„±í•  ìˆ˜ ìˆì„ ë§Œí¼ ë¡œê·¸ê°€ ëª…í™•í•´ì•¼ í•œë‹¤. ì´ê²ƒì€ ë””ë²„ê¹…ì— ë„ì›€ì„ ì¤€ë‹¤!

## Immerë¡œ ê°„ê²°í•œ reducer ì‘ì„±í•˜ê¸°

ì¼ë°˜ stateì˜ [ê°ì²´](https://react.dev/learn/updating-objects-in-state#write-concise-update-logic-with-immer)ì™€ [ë°°ì—´ì„ ë³€ê²½](https://react.dev/learn/updating-arrays-in-state#write-concise-update-logic-with-immer)í•  ë•Œì™€ ê°™ì´ Immer ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ reducerë¥¼ ë” ê°„ê²°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ `useImmerReducer`ë¥¼ ì‚¬ìš©í•˜ë©´ `push` ë˜ëŠ” `arr[i] =` í• ë‹¹ìœ¼ë¡œ stateë¥¼ ë³€ì´í•  ìˆ˜ ìˆë‹¤:

```jsx
import { useImmerReducer } from "use-immer";
import AddTask from "./AddTask.js";
import TaskList from "./TaskList.js";

function tasksReducer(draft, action) {
  switch (action.type) {
    case "added": {
      draft.push({
        id: action.id,
        text: action.text,
        done: false,
      });
      break;
    }
    case "changed": {
      const index = draft.findIndex((t) => t.id === action.task.id);
      draft[index] = action.task;
      break;
    }
    case "deleted": {
      return draft.filter((t) => t.id !== action.id);
    }
    default: {
      throw Error("Unknown action: " + action.type);
    }
  }
}

export default function TaskApp() {
  const [tasks, dispatch] = useImmerReducer(tasksReducer, initialTasks);

  function handleAddTask(text) {
    dispatch({
      type: "added",
      id: nextId++,
      text: text,
    });
  }

  function handleChangeTask(task) {
    dispatch({
      type: "changed",
      task: task,
    });
  }

  function handleDeleteTask(taskId) {
    dispatch({
      type: "deleted",
      id: taskId,
    });
  }

  return (
    <>
      <h1>Prague itinerary</h1>
      <AddTask onAddTask={handleAddTask} />
      <TaskList
        tasks={tasks}
        onChangeTask={handleChangeTask}
        onDeleteTask={handleDeleteTask}
      />
    </>
  );
}

let nextId = 3;
const initialTasks = [
  { id: 0, text: "Visit Kafka Museum", done: true },
  { id: 1, text: "Watch a puppet show", done: false },
  { id: 2, text: "Lennon Wall pic", done: false },
];
```

ReducerëŠ” ë°˜ë“œì‹œ ìˆœìˆ˜í•´ì•¼ í•˜ë¯€ë¡œ stateë¥¼ ë³€ì´í•´ì„  ì•ˆëœë‹¤. í•˜ì§€ë§Œ Immerì€ ì•ˆì „í•˜ê²Œ ë³€ì´í•  ìˆ˜ ìˆëŠ” `draft`ê°ì²´ë¥¼ ì œê³µí•œë‹¤. ìì„¸íˆ ë³´ë©´, Immerì€ ì‚¬ìš©ìê°€ ë³€ê²½í•œ `draft`ë¡œ state ë³µì‚¬ë³¸ì„ ìƒì„±í•˜ê³  ì´ ë°©ì‹ì„ í†µí•´ `useImmerReducer`ë¡œ ê´€ë¦¬ë˜ëŠ” reducerëŠ” ì²« ë²ˆì§¸ ì¸ìˆ˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆê³ , stateë¥¼ ë°˜í™˜í•  í•„ìš”ê°€ ì—†ë‹¤.

## ìš”ì•½

- `useSate`ì—ì„œÂ `useReducer`ë¡œ ë³€í™˜í•˜ë ¤ë©´:
  1. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ actionì„ ì „ë‹¬í•œë‹¤.
  2. stateì™€ actionì— ëŒ€í•´ ë‹¤ìŒ stateë¥¼ ë°˜í™˜í•˜ëŠ” reducer í•¨ìˆ˜ë¥¼ ì‘ì„±í•œë‹¤.
  3. `useState`ë¥¼Â `useReducer`ë¡œ ë°”ê¾¼ë‹¤.
- reducerë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ì¡°ê¸ˆ ë” ì‘ì„±í•´ì•¼ í•˜ì§€ë§Œ ë””ë²„ê¹…ê³¼ í…ŒìŠ¤íŠ¸ì— ë„ì›€ëœë‹¤.
- reducerëŠ” ë°˜ë“œì‹œ ìˆœìˆ˜í•´ì•¼ í•œë‹¤.
- ê° actionì€ ë‹¨ì¼ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì„ ë¬˜ì‚¬í•´ì•¼ í•œë‹¤.
- ë³€ì´ ìŠ¤íƒ€ì¼ë¡œ reducerë¥¼ ì‘ì„±í•˜ë ¤ë©´ Immerë¥¼ ì‚¬ìš©í•˜ì.
